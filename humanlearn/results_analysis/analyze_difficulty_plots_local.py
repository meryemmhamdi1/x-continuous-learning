scores = {
    1: {
        0: {0: 0.14495798319327732, 1: 0.12136929460580913, 2: 0, 3: 0, 4: 0},
        1: {
            0: 0.15711252653927812,
            1: 0.08620689655172414,
            2: 0.12011271574498063,
            3: 0,
            4: 0,
        },
        2: {
            0: 0.14180929095354522,
            1: 0.18,
            2: 0.10526315789473684,
            3: 0.11945146156622158,
            4: 0,
        },
        3: {
            0: 0.1421188630490956,
            1: 0.12903225806451613,
            2: 0.16326530612244897,
            3: 0.10810810810810811,
            4: 0.11961722488038277,
        },
        4: {
            0: 0.14210526315789473,
            1: 0.20588235294117646,
            2: 0.15384615384615385,
            3: 0.14782608695652175,
            4: 0.1189770200148258,
        },
        5: {
            0: 0.14666666666666667,
            1: 0.0,
            2: 0.13725490196078433,
            3: 0.1,
            4: 0.12260536398467432,
        },
        6: {
            0: 0.1447721179624665,
            1: 0.05,
            2: 0.05,
            3: 0.15853658536585366,
            4: 0.12217194570135746,
        },
        7: {
            0: 0.144,
            1: 0.0,
            2: 0.043478260869565216,
            3: 0.06666666666666667,
            4: 0.125,
        },
        8: {
            0: 0.1443850267379679,
            1: 0.0,
            2: 0.1111111111111111,
            3: 0.12345679012345678,
            4: 0.12261201806182702,
        },
        9: {
            0: 0.1443850267379679,
            1: 0.07142857142857142,
            2: 0.0,
            3: 0.125,
            4: 0.12322602976808585,
        },
    },
    2: {
        0: {
            0: 0.16970998925886144,
            1: 0.10714285714285714,
            2: 0.18318011576438542,
            3: 0.14285714285714285,
            4: 0.12213201553123897,
        },
        1: {
            0: 0.16877637130801687,
            1: 0.0,
            2: 0.18181818181818182,
            3: 0.11538461538461539,
            4: 0.15231431646932186,
        },
        2: {
            0: 0.17233294255568582,
            1: 0.0,
            2: 0.16140350877192983,
            3: 0,
            4: 0.15240307307486153,
        },
        3: {
            0: 0.1656590084643289,
            1: 0,
            2: 0.1956521739130435,
            3: 0,
            4: 0.1524890829694323,
        },
        4: {
            0: 0.17159763313609466,
            1: 0,
            2: 0.18421052631578946,
            3: 0,
            4: 0.1519031748815997,
        },
        5: {0: 0.171875, 1: 0, 2: 0.12857142857142856, 3: 0, 4: 0.15384615384615385},
        6: {
            0: 0.16607773851590105,
            1: 0,
            2: 0.16666666666666666,
            3: 0,
            4: 0.15326412106281892,
        },
        7: {
            0: 0.1691542288557214,
            1: 0,
            2: 0.16666666666666666,
            3: 0,
            4: 0.1528460997891778,
        },
        8: {
            0: 0.16743119266055045,
            1: 0,
            2: 0.13609467455621302,
            3: 0,
            4: 0.1539947322212467,
        },
        9: {
            0: 0.1609870740305523,
            1: 0,
            2: 0.18152866242038215,
            3: 0,
            4: 0.15293484114162628,
        },
    },
    3: {
        0: {
            0: 0.21685971685971686,
            1: 0.18681318681318682,
            2: 0,
            3: 0.2657544112351458,
            4: 0.15236363636363637,
        },
        1: {
            0: 0.21860767729342875,
            1: 0.18994413407821228,
            2: 0,
            3: 0.2318840579710145,
            4: 0.18897445300085564,
        },
        2: {
            0: 0.21739130434782608,
            1: 0.19534883720930232,
            2: 0,
            3: 0.23880597014925373,
            4: 0.18930041152263374,
        },
        3: {
            0: 0.21663019693654267,
            1: 0.2,
            2: 0,
            3: 0.20588235294117646,
            4: 0.1903848459417336,
        },
        4: {
            0: 0.21533101045296169,
            1: 0.19455252918287938,
            2: 0,
            3: 0.2542372881355932,
            4: 0.19035077217766072,
        },
        5: {
            0: 0.2187039764359352,
            1: 0.1574585635359116,
            2: 0,
            3: 0.20353982300884957,
            4: 0.19187522669568371,
        },
        6: {
            0: 0.2089041095890411,
            1: 0.14285714285714285,
            2: 0,
            3: 0.2978723404255319,
            4: 0.19293608841902932,
        },
        7: {
            0: 0.20930232558139536,
            1: 0.19414893617021275,
            2: 0,
            3: 0.16101694915254236,
            4: 0.19237308719941706,
        },
        8: {
            0: 0.2129692832764505,
            1: 0.2182410423452769,
            2: 0,
            3: 0.0847457627118644,
            4: 0.1909827148555542,
        },
        9: {
            0: 0.21423330887747616,
            1: 0.2,
            2: 0,
            3: 0.18115942028985507,
            4: 0.19107121193740143,
        },
    },
}
lang_dist = {
    1: {
        0: {0: {"en": 476}, 1: {"en": 2892}, 2: {}, 3: {}, 4: {}},
        1: {0: {"en": 471}, 1: {"en": 58}, 2: {"en": 2839}, 3: {}, 4: {}},
        2: {0: {"en": 409}, 1: {"en": 150}, 2: {"en": 38}, 3: {"en": 2771}, 4: {}},
        3: {
            0: {"en": 387},
            1: {"en": 31},
            2: {"en": 196},
            3: {"en": 37},
            4: {"en": 2717},
        },
        4: {
            0: {"en": 380},
            1: {"en": 34},
            2: {"en": 26},
            3: {"en": 230},
            4: {"en": 2698},
        },
        5: {
            0: {"en": 375},
            1: {"en": 11},
            2: {"en": 51},
            3: {"en": 60},
            4: {"en": 2871},
        },
        6: {
            0: {"en": 373},
            1: {"en": 20},
            2: {"en": 20},
            3: {"en": 82},
            4: {"en": 2873},
        },
        7: {
            0: {"en": 375},
            1: {"en": 1},
            2: {"en": 23},
            3: {"en": 105},
            4: {"en": 2864},
        },
        8: {
            0: {"en": 374},
            1: {"en": 7},
            2: {"en": 27},
            3: {"en": 81},
            4: {"en": 2879},
        },
        9: {
            0: {"en": 374},
            1: {"en": 14},
            2: {"en": 19},
            3: {"en": 72},
            4: {"en": 2889},
        },
    },
    2: {
        0: {
            0: {"en": 386, "de": 545},
            1: {"en": 28},
            2: {"en": 114, "de": 2823},
            3: {"en": 7},
            4: {"en": 2833},
        },
        1: {
            0: {"en": 424, "de": 524},
            1: {"en": 1},
            2: {"en": 75, "de": 112},
            3: {"en": 26},
            4: {"en": 2842, "de": 2732},
        },
        2: {
            0: {"en": 404, "de": 449},
            1: {"en": 1},
            2: {"en": 120, "de": 165},
            3: {},
            4: {"en": 2843, "de": 2754},
        },
        3: {
            0: {"en": 392, "de": 435},
            1: {},
            2: {"en": 96, "de": 88},
            3: {},
            4: {"en": 2880, "de": 2845},
        },
        4: {
            0: {"en": 400, "de": 445},
            1: {},
            2: {"en": 80, "de": 110},
            3: {},
            4: {"en": 2888, "de": 2813},
        },
        5: {
            0: {"en": 388, "de": 444},
            1: {},
            2: {"en": 81, "de": 129},
            3: {},
            4: {"en": 2899, "de": 2795},
        },
        6: {
            0: {"en": 391, "de": 458},
            1: {},
            2: {"en": 92, "de": 112},
            3: {},
            4: {"en": 2885, "de": 2798},
        },
        7: {
            0: {"en": 378, "de": 426},
            1: {},
            2: {"en": 95, "de": 145},
            3: {},
            4: {"en": 2895, "de": 2797},
        },
        8: {
            0: {"en": 403, "de": 469},
            1: {},
            2: {"en": 75, "de": 94},
            3: {},
            4: {"en": 2890, "de": 2805},
        },
        9: {
            0: {"en": 393, "de": 458},
            1: {},
            2: {"en": 126, "de": 188},
            3: {},
            4: {"en": 2849, "de": 2722},
        },
    },
    3: {
        0: {
            0: {"en": 422, "de": 499, "hi": 633},
            1: {"en": 130, "de": 143},
            2: {},
            3: {"en": 15, "de": 27, "hi": 2735},
            4: {"en": 2801, "de": 2699},
        },
        1: {
            0: {"en": 408, "de": 455, "hi": 674},
            1: {"en": 76, "de": 103},
            2: {},
            3: {"en": 40, "de": 72, "hi": 95},
            4: {"en": 2844, "de": 2738, "hi": 2599},
        },
        2: {
            0: {"en": 401, "de": 472, "hi": 553},
            1: {"en": 59, "de": 82, "hi": 74},
            2: {},
            3: {"en": 35, "de": 28, "hi": 138},
            4: {"en": 2873, "de": 2786, "hi": 2603},
        },
        3: {
            0: {"en": 390, "de": 434, "hi": 547},
            1: {"en": 74, "de": 131, "hi": 85},
            2: {},
            3: {"en": 25, "de": 48, "hi": 29},
            4: {"en": 2879, "de": 2755, "hi": 2707},
        },
        4: {
            0: {"en": 400, "de": 476, "hi": 559},
            1: {"en": 81, "de": 81, "hi": 95},
            2: {},
            3: {"en": 15, "de": 16, "hi": 28},
            4: {"en": 2872, "de": 2795, "hi": 2686},
        },
        5: {
            0: {"en": 383, "de": 438, "hi": 537},
            1: {"en": 88, "de": 131, "hi": 143},
            2: {},
            3: {"en": 27, "de": 51, "hi": 35},
            4: {"en": 2870, "de": 2748, "hi": 2653},
        },
        6: {
            0: {"en": 405, "de": 478, "hi": 577},
            1: {"en": 83, "de": 105, "hi": 85},
            2: {},
            3: {"en": 11, "de": 17, "hi": 19},
            4: {"en": 2869, "de": 2768, "hi": 2687},
        },
        7: {
            0: {"en": 382, "de": 449, "hi": 545},
            1: {"en": 108, "de": 149, "hi": 119},
            2: {},
            3: {"en": 31, "de": 43, "hi": 44},
            4: {"en": 2847, "de": 2727, "hi": 2660},
        },
        8: {
            0: {"en": 408, "de": 476, "hi": 581},
            1: {"en": 68, "de": 109, "hi": 130},
            2: {},
            3: {"en": 8, "de": 30, "hi": 21},
            4: {"en": 2884, "de": 2753, "hi": 2636},
        },
        9: {
            0: {"en": 382, "de": 436, "hi": 545},
            1: {"en": 108, "de": 123, "hi": 129},
            2: {},
            3: {"en": 33, "de": 52, "hi": 53},
            4: {"en": 2845, "de": 2757, "hi": 2641},
        },
    },
}
num_items = {
    1: {
        0: {0: 476, 1: 2892, 2: 0, 3: 0, 4: 0},
        1: {0: 471, 1: 58, 2: 2839, 3: 0, 4: 0},
        2: {0: 409, 1: 150, 2: 38, 3: 2771, 4: 0},
        3: {0: 387, 1: 31, 2: 196, 3: 37, 4: 2717},
        4: {0: 380, 1: 34, 2: 26, 3: 230, 4: 2698},
        5: {0: 375, 1: 11, 2: 51, 3: 60, 4: 2871},
        6: {0: 373, 1: 20, 2: 20, 3: 82, 4: 2873},
        7: {0: 375, 1: 1, 2: 23, 3: 105, 4: 2864},
        8: {0: 374, 1: 7, 2: 27, 3: 81, 4: 2879},
        9: {0: 374, 1: 14, 2: 19, 3: 72, 4: 2889},
    },
    2: {
        0: {0: 931, 1: 28, 2: 2937, 3: 7, 4: 2833},
        1: {0: 948, 1: 1, 2: 187, 3: 26, 4: 5574},
        2: {0: 853, 1: 1, 2: 285, 3: 0, 4: 5597},
        3: {0: 827, 1: 0, 2: 184, 3: 0, 4: 5725},
        4: {0: 845, 1: 0, 2: 190, 3: 0, 4: 5701},
        5: {0: 832, 1: 0, 2: 210, 3: 0, 4: 5694},
        6: {0: 849, 1: 0, 2: 204, 3: 0, 4: 5683},
        7: {0: 804, 1: 0, 2: 240, 3: 0, 4: 5692},
        8: {0: 872, 1: 0, 2: 169, 3: 0, 4: 5695},
        9: {0: 851, 1: 0, 2: 314, 3: 0, 4: 5571},
    },
    3: {
        0: {0: 1554, 1: 273, 2: 0, 3: 2777, 4: 5500},
        1: {0: 1537, 1: 179, 2: 0, 3: 207, 4: 8181},
        2: {0: 1426, 1: 215, 2: 0, 3: 201, 4: 8262},
        3: {0: 1371, 1: 290, 2: 0, 3: 102, 4: 8341},
        4: {0: 1435, 1: 257, 2: 0, 3: 59, 4: 8353},
        5: {0: 1358, 1: 362, 2: 0, 3: 113, 4: 8271},
        6: {0: 1460, 1: 273, 2: 0, 3: 47, 4: 8324},
        7: {0: 1376, 1: 376, 2: 0, 3: 118, 4: 8234},
        8: {0: 1465, 1: 307, 2: 0, 3: 59, 4: 8273},
        9: {0: 1363, 1: 360, 2: 0, 3: 138, 4: 8243},
    },
}


import seaborn as sns
import pandas as pd
import matplotlib.pyplot as plt

LANG_ORDER = "en_de_hi_th"
ER_STRATEGY = "easy"
plot_save_dir = plot_save_dir = (
    "/Users/meryemmhamdi/USCGDrive/Fall23/SpacedRepetition/Code/x-continuous-learning_new/outputs/Plots/spacedrepetition/QueuesViz/"
    + ER_STRATEGY
    + "/"
)

for k in range(1, 4, 1):
    ## 3. Bar Plot for each epoch after training on each language: x-axis: queue number, y-axis: percentage easiness of items
    for ep in range(10):
        df = pd.DataFrame(
            {
                "Queue Number": list(range(1, 6, 1)),
                "Scores after Training on "
                + str(k): [
                    scores[k][ep][0],
                    scores[k][ep][1],
                    scores[k][ep][2],
                    scores[k][ep][3],
                    scores[k][ep][4],
                ],
            }
        )
        plt.figure()
        ax = sns.lineplot(
            data=df, x="Queue Number", y="Scores after Training on " + str(k)
        )
        ax.set_xticks(list(range(1, 6, 1)))
        ax.set_xticklabels(["1", "2", "3", "4", "5"])
        # plt.show()
        plt.savefig(
            plot_save_dir
            + "scores_per_queue_train-"
            + str(k)
            + "_epoch-"
            + str(ep)
            + ".png"
        )

    ## Easiness Scores: Curve Plot for all epochs and queues: 5 curves
    queues_all = []
    easiness_all = []
    for i in range(5):
        queues_all.extend(["Queue " + str(i + 1)] * 10)
        easiness_all.extend([scores[k][ep][i] for ep in range(10)])

    df = pd.DataFrame(
        {
            "Epochs": list(range(1, 11, 1)) * 5,
            # "Queue 1": [scores[k][ep][0] for ep in range(10)],
            # "Queue 2": [scores[k][ep][1] for ep in range(10)],
            # "Queue 3": [scores[k][ep][2] for ep in range(10)],
            # "Queue 4": [scores[k][ep][3] for ep in range(10)],
            # "Queue 5": [scores[k][ep][4] for ep in range(10)],
            "Queues": queues_all,
            "Easiness Scores": easiness_all,
        }
    )

    # sns.lineplot(x="Epochs", y="value", hue="variable", data=pd.melt(df, ["Epochs"]))
    plt.figure()
    ax1 = sns.lineplot(
        data=df, x="Epochs", y="Easiness Scores", hue="Queues"
    )  # (data=df)
    # ax = sns.lineplot(data=df, x="Epochs", y="Queue 1", label="Queue 1", color="red")
    # ax = sns.lineplot(data=df, x="Epochs", y="Queue 2", label="Queue 2", color="blue")
    # ax = sns.lineplot(data=df, x="Epochs", y="Queue 3", label="Queue 3", color="green")
    # ax = sns.lineplot(data=df, x="Epochs", y="Queue 4", label="Queue 4", color="orange")
    # ax = sns.lineplot(data=df, x="Epochs", y="Queue 5", label="Queue 5", color="brown")
    ax1.legend(loc="lower right")
    ax1.set_xticks(list(range(1, 11, 1)))
    ax1.set_xticklabels(["1", "2", "3", "4", "5", "6", "7", "8", "9", "10"])
    # plt.show()
    plt.savefig(plot_save_dir + "queues_easiness_after_train-" + str(k) + ".png")

    ## Number of items: Curve Plot for all epochs and queues: 5 curves
    queues_all = []
    quantities_all = []
    for i in range(5):
        queues_all.extend(["Queue " + str(i + 1)] * 10)
        quantities_all.extend([num_items[k][ep][i] for ep in range(10)])

    df = pd.DataFrame(
        {
            "Epochs": list(range(1, 11, 1)) * 5,
            "Quantities": quantities_all,
            "Queues": queues_all
            # "Queue 1": [num_items[k][ep][0] for ep in range(10)],
            # "Queue 2": [num_items[k][ep][1] for ep in range(10)],
            # "Queue 3": [num_items[k][ep][2] for ep in range(10)],
            # "Queue 4": [num_items[k][ep][3] for ep in range(10)],
            # "Queue 5": [num_items[k][ep][4] for ep in range(10)],
        }
    )

    plt.figure()
    sns.lineplot(data=df, x="Epochs", y="Quantities", hue="Queues")
    # plt.show()
    plt.savefig(plot_save_dir + "queues_quantity_after_train-" + str(k) + ".png")

    ## Number of items per language: Curve Plot for all epochs and queues: 5 curves
    for lang in LANG_ORDER.split("_"):
        queues_all = []
        quantities_all = []
        for i in range(5):
            queues_all.extend(["Queue " + str(i + 1)] * 10)
            print("lang_dist[k][ep][i]:", lang_dist[k][ep][i])
            quantities_ep = []
            for ep in range(10):
                if lang in lang_dist[k][ep][i]:
                    quantities_ep.append(lang_dist[k][ep][i][lang])
                else:
                    quantities_ep.append(0)
            quantities_all.extend(quantities_ep)

        df = pd.DataFrame(
            {
                "Epochs": list(range(1, 11, 1)) * 5,
                "Queues": queues_all,
                "Quantities": quantities_all,
            }
        )

        plt.figure()
        sns.lineplot(data=df, x="Epochs", y="Quantities", hue="Queues")
        # plt.show()
        plt.savefig(
            plot_save_dir
            + "queues_quantity_lang-"
            + lang
            + "_after_train-"
            + str(k)
            + ".png"
        )
